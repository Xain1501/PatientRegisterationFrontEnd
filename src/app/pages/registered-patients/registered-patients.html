<div class="container py-4">

<!-- Search + Add -->
<div class="d-flex mb-3 align-items-start">
  <input class="form-control me-2" placeholder="Search by ID" [(ngModel)]="searchId" (keyup.enter)="search()">
  <button class="btn btn-primary me-2" (click)="search()">Search</button>
  <button class="btn btn-outline-secondary me-auto" (click)="loadAll()">Reset</button>
  <button class="btn btn-success" (click)="openEdit()">Add</button>
</div>

<!-- Patient Table -->
<div class="table-responsive">
  <table class="table table-striped table-hover align-middle">
    <thead class="table-light">
      <tr><th>ID</th><th>First</th><th>Last</th><th>DOB</th><th>Gender</th><th>Contact</th><th>Address</th><th>Actions</th></tr>
    </thead>
    <tbody>
      <tr *ngFor="let p of patients">
        <td>{{p.id}}</td><td>{{p.firstName}}</td><td>{{p.lastName}}</td><td>{{p.dateOfBirth | date}}</td><td>{{p.gender}}</td><td>{{p.contactNumber}}</td><td>{{p.address}}</td>
        <td>
          <button class="btn btn-sm btn-warning me-1" (click)="openEdit(p)">✏️</button>
          <button class="btn btn-sm btn-danger" (click)="remove(p.id)">🗑️</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
</div>

<!-- Modal Form -->
<div class="modal fade" id="editModal" tabindex="-1">
  <div class="modal-dialog modal-lg"><div class="modal-content">
    <form [formGroup]="updateForm" (ngSubmit)="save()">
      <div class="modal-header">
        <h5 class="modal-title">Patient Details</h5>
        <button type="button" class="btn-close" (click)="closeModal()"></button>
      </div>
      <div class="modal-body">
        <div class="row g-3">
          <!-- First Name -->
          <div class="col-md-6">
            <label class="form-label">First Name *</label>
            <input class="form-control" formControlName="firstName">
          </div>
          <!-- Last Name -->
          <div class="col-md-6">
            <label class="form-label">Last Name</label>
            <input class="form-control" formControlName="lastName">
          </div>
          <!-- Date of Birth -->
          <div class="col-md-6">
            <label class="form-label">DOB *</label>
            <input type="date" class="form-control" formControlName="dateOfBirth">
          </div>
          <!-- Gender -->
          <div class="col-md-6">
            <label class="form-label">Gender</label>
            <select class="form-select" formControlName="gender">
              <option value="">Choose…</option>
              <option>Male</option><option>Female</option><option>Other</option>
            </select>
          </div>
          <!-- Contact -->
          <div class="col-md-6">
            <label class="form-label">Contact *</label>
            <input class="form-control" formControlName="contactNumber">
          </div>
          <!-- Address -->
          <div class="col-md-6">
            <label class="form-label">Address</label>
            <textarea class="form-control" formControlName="address"></textarea>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="closeModal()">Cancel</button>
        <button type="submit" class="btn btn-success">Save</button>
      </div>
    </form>
  </div></div>
</div>